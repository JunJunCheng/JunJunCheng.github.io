<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Juncheng Zhao"><title>Effective C++ Note (2) · JunJun</title><meta name="description" content="Item 1 View C++ as a federation of languages.Today’s C++ is a multiparadigm programming language, one support- ing a combination of procedural, object"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">JunJun</a></h3></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Blog by JunJun</span></a></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Effective C++ Note (2)</a></h3></div><div class="post-content"><h3 id="Item-1-View-C-as-a-federation-of-languages"><a href="#Item-1-View-C-as-a-federation-of-languages" class="headerlink" title="Item 1 View C++ as a federation of languages."></a>Item 1 View C++ as a federation of languages.</h3><p>Today’s C++ is a multiparadigm programming language, one support- ing a combination of procedural, object-oriented, functional, generic, and metaprogramming features. The easiest way is to view C++ not as a single language but as a feder- ation of related languages. Within a particular sublanguage, the rules tend to be simple, straightforward, and easy to remember.</p>
<p>It can be classified into 4 sublanguage:</p>
<ol>
<li>C</li>
<li>Object-oriented C++</li>
<li>Template C++</li>
<li>The STL </li>
</ol>
<h3 id="Item-2-Prefer-const-enumms-and-inline-to-define"><a href="#Item-2-Prefer-const-enumms-and-inline-to-define" class="headerlink" title="Item 2 Prefer const, enumms and inline to define"></a>Item 2 Prefer <em>const</em>, <em>enumms</em> and <em>inline</em> to <em>define</em></h3><p>Better choose <em>consts</em> instead of <em>define</em> and two special cases are worth mentioning:</p>
<h4 id="The-first-is-defining-constant-pointers"><a href="#The-first-is-defining-constant-pointers" class="headerlink" title="The first is defining constant pointers"></a>The first is defining constant pointers</h4><p>Because constant definitions are typically put in header files, it’s important that the pointer be declared const, usually in addition to what the pointer points to.<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">authorName</span><span class="params">(<span class="string">"Juncheng"</span>)</span></span>;</div></pre></td></tr></table></figure></p>
<p>instead of<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">const</span> <span class="keyword">char</span>* <span class="keyword">const</span> <span class="title">authorName</span><span class="params">(<span class="string">"Juncheng"</span>)</span></span>;</div></pre></td></tr></table></figure></p>
<h4 id="The-second-special-case-concerns-class-specific-constants"><a href="#The-second-special-case-concerns-class-specific-constants" class="headerlink" title="The second special case concerns class-specific constants"></a>The second special case concerns class-specific constants</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GamePlayer</span> &#123;</span> </div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> NumTurns = <span class="number">5</span>;</div><div class="line">	<span class="keyword">int</span> scores[NumTurns];</div><div class="line">	<span class="comment">// ... </span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>above is a <em>declaration</em> for the NumTurns not a definition. If the compilers are too old, it might not compile the above code correctly. In cases where the above syntax can’t be used, you put the initial value at the point of definition:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GamePlayer</span> &#123;</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> NumTurns;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> GamePlayer::NumTurns = <span class="number">5</span>;</div></pre></td></tr></table></figure>
<p>The only exception is that you need the value of a class constant during compilation of class like the first example above <code>int scores[NumTurns]</code>. “<em>The enums hack</em>“:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GamePlayer</span> &#123;</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">enum</span> &#123;NumTurns = <span class="number">5</span>&#125;;</div><div class="line">	<span class="keyword">int</span> scores[NumTurns];</div><div class="line">	<span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>Question?<br>Is it possible to change the value of <code>static const int numTurns = 5</code>?</li>
</ul>
<h4 id="Use-of-inline-instead-of-a-macro"><a href="#Use-of-inline-instead-of-a-macro" class="headerlink" title="Use of inline instead of a macro"></a>Use of <em>inline</em> instead of a <em>macro</em></h4><p>example: </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line"><span class="class">// <span class="title">call</span> <span class="title">by</span> <span class="title">reference</span>-<span class="title">to</span>-<span class="title">const</span></span></div><div class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">callWithMax</span> (<span class="title">const</span> <span class="title">T</span> &amp; <span class="title">a</span>, <span class="title">const</span> <span class="title">T</span> &amp; <span class="title">b</span>)&#123;</span></div><div class="line">	f(a &gt; b ? a : b);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Things-to-Remember"><a href="#Things-to-Remember" class="headerlink" title="Things to Remember"></a><font color="red"><strong>Things to Remember</strong></font></h4><ul>
<li>For simple constants, prefer const objects or enums to #defines.</li>
<li>For function-like macros, prefer inline functions to #defines.</li>
</ul>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-09-16</span><i class="fa fa-tag"></i></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,http://yoursite.com/2017/09/16/Effective-C-Note-2/,JunJun,Effective C++ Note (2),;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2017/09/16/Effective-C-Note-3/" title="Effective C++ Note (3)" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/2017/09/14/CONST/" title="CONST" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>